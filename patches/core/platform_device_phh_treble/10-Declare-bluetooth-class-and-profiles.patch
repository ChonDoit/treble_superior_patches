From 89de9bf4218ecc80c6c5a6b7d495e85073841149 Mon Sep 17 00:00:00 2001
From: ChonDoit <thphantomblog@gmail.com>
Date: Fri, 7 Oct 2022 04:12:58 +0000
Subject: [PATCH] Declare Bluetooth Class and profiles

---
 system.prop | 52 ++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 48 insertions(+), 4 deletions(-)

diff --git a/system.prop b/system.prop
index a6c7ede..4f9cd76 100644
--- a/system.prop
+++ b/system.prop
@@ -1,16 +1,60 @@
+# ADB Insecure
 ro.adb.secure=0
-#Some devices have sdcardfs kernel panicing on 8.0
-#Disable for everyone for the moment
+
+# Some devices have sdcardfs kernel panicing on 8.0
+# Disable for everyone for the moment
 ro.sys.sdcardfs=0
+
+# Night mode
 persist.sys.overlay.nightmode=true
 
-#Disable debugging strict mode toasts
+# Disable debugging strict mode toasts
 persist.sys.strictmode.disable=true
+
+# 
 persist.sys.phh.mainkeys=0
 
+# User profiles
 fw.max_users=10
 persist.sys.max_profiles=10
+
+# Realme lockstate
 ro.boot.realme.lockstate=0
 
-#Fixes fingerprint unlock delay
+# Fixes fingerprint unlock delay
 persist.wm.enable_remote_keyguard_animation=0
+
+# System props to enable Bluetooth Quality Report (BQR) feature
+# BQR event mask configuration (14 or 30)
+persist.bluetooth.bqr.event_mask=14
+
+# BQR minimum report interval configuration
+persist.bluetooth.bqr.min_interval_ms=500
+
+# Set the Bluetooth Class of Device
+# Service Field: 0x5A -> 90
+#    Bit 17: Networking
+#    Bit 19: Capturing
+#    Bit 20: Object Transfer
+#    Bit 22: Telephony
+# MAJOR_CLASS: 0x02 -> 2 (Phone)
+# MINOR_CLASS: 0x0C -> 12 (Smart Phone)
+bluetooth.device.class_of_device=90,2,12
+
+# Set supported Bluetooth profiles to enabled
+bluetooth.profile.asha.central.enabled=true
+bluetooth.profile.a2dp.source.enabled=true
+bluetooth.profile.avrcp.target.enabled=true
+bluetooth.profile.bas.client.enabled=true
+bluetooth.profile.gatt.enabled=true
+bluetooth.profile.hfp.ag.enabled=true
+bluetooth.profile.hid.device.enabled=true
+bluetooth.profile.hid.host.enabled=true
+bluetooth.profile.map.server.enabled=true
+bluetooth.profile.opp.enabled=true
+bluetooth.profile.pan.nap.enabled=true
+bluetooth.profile.pan.panu.enabled=true
+bluetooth.profile.pbap.server.enabled=true
+
+# This profile leads to bt crash here, uncomment if you need it
+# bluetooth.profile.sap.server.enabled=true
-- 
2.34.1

