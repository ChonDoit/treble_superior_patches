From 7a7427d11d7e815d166153ff3a8e34eb86a0d5f4 Mon Sep 17 00:00:00 2001
From: ChonDoit <thphantomblog@gmail.com>
Date: Tue, 16 Aug 2022 21:00:44 +0000
Subject: [PATCH] Allow hwc HAL to read hwc.exynos.vsync_mode prop

`W composer@2.1-se: type=1400 audit(0.0:23509): avc: denied { read } for name="u:object_r:default_prop:s0" dev="tmpfs" ino=2518 scontext=u:r:hal_graphics_composer_default:s0 tcontext=u:object_r:default_prop:s0 tclass=file permissive=0`
`E libc    : Access denied finding property "hwc.exynos.vsync_mode"`
---
 sepolicy/property_contexts | 1 +
 sepolicy/samsung.te        | 4 ++++
 2 files changed, 5 insertions(+)

diff --git a/sepolicy/property_contexts b/sepolicy/property_contexts
index 9f4314a..185a08b 100644
--- a/sepolicy/property_contexts
+++ b/sepolicy/property_contexts
@@ -1 +1,2 @@
 persist.sys.sf.hs_mode         u:object_r:sf_hs_mode_prop:s0
+hwc.exynos.vsync_mode      u:object_r:vendor_hwc_prop:s0
diff --git a/sepolicy/samsung.te b/sepolicy/samsung.te
index 344372c..673d551 100644
--- a/sepolicy/samsung.te
+++ b/sepolicy/samsung.te
@@ -7,3 +7,7 @@ type hal_graphics_composer_default, domain;
 type sf_hs_mode_prop, property_type;
 
 get_prop(hal_graphics_composer_default, sf_hs_mode_prop);
+
+type vendor_hwc_prop, property_type;
+
+get_prop(hal_graphics_composer_default, vendor_hwc_prop);
-- 
2.17.1

